syntax = "proto3";

//go:generate protoc --go_out=../internal/pb --go_opt=paths=source_relative --go-grpc_out=../internal/pb --go-grpc_opt=paths=source_relative report_service.proto

package report_service;

option go_package = "report-service/internal/pb";

service ReportService {
  rpc CreateReport (CreateReportRequest) returns (CreateReportResponse);
  rpc GetReport (GetReportRequest) returns (GetReportResponse);
  rpc ListReports (ListReportsRequest) returns (ListReportsResponse);
}

message CreateReportRequest {
  string report_id = 1;         // レポートを一意に識別するID
  string report_body = 2;       // レポート本文 (ベクトル化の対象)
  string user_id = 3;           // 作成者/通知先ユーザーID
}

message Report {
  string report_id = 1;
  string report_body = 2;
  string user_id = 3;
  int64 created_at_unix = 4;
}

message CreateReportResponse {
  Report report = 1;
  bool success = 2;
  string message = 3;
}

message GetReportRequest {
  string report_id = 1;
}

message GetReportResponse {
  Report report = 1;
  bool success = 2;
  string message = 3;
}

message ListReportsRequest {
  string user_id = 1;
  int32 page_size = 2;
  string page_token = 3;
}

message ListReportsResponse {
  repeated Report reports = 1;
  string next_page_token = 2;
  bool success = 3;
  string message = 4;
}
