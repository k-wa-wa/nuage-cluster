



"""
A scalar that can represent any JSON Object value.
"""
scalar JSONObject

type LoginPayload {
	token: String!
	expiresIn: Int!
}

type Mutation {
	"""
	ユーザー認証を行い、JWTを返します。
	"""
	login(username: String!, password: String!): LoginPayload!
	"""
	ユーザープロファイルを更新します。
	"""
	updateUserProfile(displayName: String, notificationSettings: [NotificationSettingInput!]): UserProfile!
	"""
	プッシュ通知の購読情報を登録します。
	"""
	subscribe(subscription: SubscriptionInput!): SubscribePayload!
}

input NotificationSettingInput {
	key: String!
	value: String!
}

input SubscriptionInput {
	endpoint: String!
	expirationTime: String
	keys: SubscriptionKeysInput!
}

input SubscriptionKeysInput {
	p256dh: String!
	auth: String!
}

type SubscribePayload {
	success: Boolean!
	message: String
}

type Query {
	"""
	認証済みのユーザープロファイルを取得します。
	"""
	me: UserProfile!
	"""
	レポート一覧を取得します。
	"""
	reports(userId: String!, pageSize: Int, pageToken: String): [Report!]!
	"""
	特定のレポートを取得します。
	"""
	report(reportId: String!): Report
	"""
	VAPID公開鍵を取得します。
	"""
	vapidPublicKey: String!
}

type Report {
	reportId: String!
	reportBody: String!
	userId: String!
	createdAtUnix: Int!
}


type UserProfile {
	id: String!
	displayName: String!
	notificationSettings: JSONObject!
}

schema {
	query: Query
	mutation: Mutation
}
